{"ast":null,"code":"import _defineProperty from\"C:/Users/Baburaj/hyundaidashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/Users/Baburaj/hyundaidashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Baburaj/hyundaidashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Baburaj/hyundaidashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/Users/Baburaj/hyundaidashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from'react';import{Navbar,Brand,Container,Table,Nav,Dropdown,Button,CardGroup,Card,Form,Row,Col}from\"react-bootstrap\";import logo_hyundai from'../img/MOBIS_LOGO.png';import logo_hyundai1 from\"../img/Icon ionic-md-arrow-dropdown.svg\";import Dropdowns from'../components/select_dropdown';import\"./vertical_dashboard.css\";import axios from'axios';import Select from'react-select';import{trackPromise}from'react-promise-tracker';import $ from'jquery';import Dashboard from'../components/dashboard';import jQuery from'jquery';import moment from'moment';import DateRangePicker from'react-bootstrap-daterangepicker';import ReactPaginate from'react-paginate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var customStyles={option:function option(provided,state){return _objectSpread(_objectSpread({},provided),{},{borderBottom:'2px dotted green',color:state.isSelected?'yellow':'black',backgroundColor:state.isSelected?'green':'white'});},control:function control(provided){return _objectSpread(_objectSpread({},provided),{},{marginTop:\"5%\"});}};var options1=[{value:'National',label:'National'},{value:'Region',label:'Region'},{value:'Dealer',label:'Dealer'}];function Vertical(){var _jsx2;var _useState=useState({page_count:null}),_useState2=_slicedToArray(_useState,2),pageResponse=_useState2[0],pageCountResponse=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),current=_useState4[0],currenPage=_useState4[1];var _useState5=useState('National'),_useState6=_slicedToArray(_useState5,2),showForm=_useState6[0],setShowForm=_useState6[1];var _useState7=useState({data:null,repos:null}),_useState8=_slicedToArray(_useState7,2),resp=_useState8[0],setGitData=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),selectValue=_useState10[0],setSelectValue=_useState10[1];var _useState11=useState({start:moment().subtract(100,'days'),end:moment().subtract(70,'days')}),_useState12=_slicedToArray(_useState11,2),state=_useState12[0],setState=_useState12[1];var _useState13=useState({resonse_data:null}),_useState14=_slicedToArray(_useState13,2),response=_useState14[0],setResponse=_useState14[1];var comp,comp1;var handleAddrTypeChange=function handleAddrTypeChange(e){if(e.value==\"Region\"){var region_east=localStorage.getItem(\"region_east\");setSelectValue(region_east);}else if(e.value==\"Dealer\"){var dealer=localStorage.getItem(\"dealer\");setSelectValue(dealer);}else if(e.value==\"National\"){setSelectValue(' ');}setShowForm(e.value);};var handleAddrTypeChange1=function handleAddrTypeChange1(e){setSelectValue(e.value);};var handleAddrTypeChange2=function handleAddrTypeChange2(e){setSelectValue(e.value);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var respGlobal,respRepos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_dealer_list/?username=login1&permission=[%22KIA%22]&start_date=01/01/2021&end_date=30/01/2021&report_type=DCSI\");case 2:respGlobal=_context.sent;_context.next=5;return axios.get('https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_region_list/',{params:{username:'login',permission:'[\"KIA\"]',start_date:'01/01/2021',end_date:'30/01/2021',report_type:'DCSI'}});case 5:respRepos=_context.sent;setGitData({data:respGlobal.data,repos:respRepos.data});localStorage.setItem(\"region_east\",resp.repos[0].value);localStorage.setItem(\"dealer\",resp.data[0].value);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var fetchData1=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var dashApi;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_table_data/',{params:{username:'login',hierarchy:showForm,dealer_code:selectValue,region_name:selectValue,permission:'[\"KIA\"]',start_date:state.start.format('DD/MM/YYYY'),end_date:state.end.format('DD/MM/YYYY'),report_type:'DCSI',current_page:current,records_per_page:'50'}});case 3:dashApi=_context2.sent;setResponse({resonse_data:dashApi.data});pageCountResponse({page_count:Math.ceil(dashApi.data.meta.total_records/dashApi.data.meta.record_limit_per_page)});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",{err:_context2.t0});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function fetchData1(){return _ref2.apply(this,arguments);};}();console.log(pageResponse.page_count);useEffect(function(){trackPromise(fetchData());trackPromise(fetchData1());},[showForm,state,selectValue,current]);if(showForm=='Region'){comp=/*#__PURE__*/_jsx(Select,{className:\"col-md-2 col-offset-4\",styles:customStyles,options:resp.repos,defaultValue:resp.repos[0],onChange:function onChange(e){return handleAddrTypeChange1(e);}});}else if(showForm=='Dealer'){comp1=/*#__PURE__*/_jsx(Select,{className:\"col-md-2 col-offset-4\",styles:customStyles,options:resp.data,defaultValue:resp.data[0],onChange:function onChange(e){return handleAddrTypeChange2(e);}});}var handleEvent=function handleEvent(e){console.log(e.ranges);};console.log(state.start.format('DD/MM/YYYY')+\"-\"+state.end.format('DD/MM/YYYY'));var start=state.start,end=state.end;var handleCallback=function handleCallback(start,end){setState({start:start,end:end});};var label=start.format('MMMM D, YYYY')+' - '+end.format('MMMM D, YYYY');if(response.resonse_data){var getKey=Object.keys(response.resonse_data.table_data[0]);}var handlePageClick=function handlePageClick(e){currenPage(e.selected+1);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Navbar,{bg:\"light1\",children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"#home\",children:/*#__PURE__*/_jsx(\"img\",{src:logo_hyundai})}),/*#__PURE__*/_jsx(Navbar.Toggle,{}),/*#__PURE__*/_jsx(Navbar.Collapse,{className:\"justify-content-end\",children:/*#__PURE__*/_jsxs(Navbar.Text,{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#login\",style:{marginRight:'20px',color:'#707070',fontFamily:\"Hyundai Sans Head Office\"},children:\"Logout\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\"}),/*#__PURE__*/_jsx(\"img\",{src:logo_hyundai1})]})})]}),/*#__PURE__*/_jsxs(Nav,{style:{borderBottom:'1px solid #B2B2B2',margin:'10px'},defaultActiveKey:\"vertical_dashboard\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",style:{fontFamily:\"Hyundai Sans Head Office\"},children:\"Vertical Dashboard\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"vertical_dashboard\",style:{fontFamily:\"Hyundai Sans Head Office\"},children:\"Horizontal Dashboard\"})}),/*#__PURE__*/_jsx(Nav.Item,{className:\"justify-content-end\",style:{flex:'1'},children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"disabled\",style:{textAlign:'right',color:'#0A0A0A',fontFamily:\"Hyundai Sans Head Office\"},children:\"Dowload Report\"})})]}),/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsxs(Row,{style:{margin:'1px'},children:[/*#__PURE__*/_jsx(DateRangePicker,{initialSettings:{startDate:start.toDate(),endDate:end.toDate()},onCallback:handleCallback,styles:customStyles,children:/*#__PURE__*/_jsx(\"input\",{id:\"someRandomID\",className:\"col-sm-2 col-offset-4\",style:{height:'40px',margin:'10px'}})}),/*#__PURE__*/_jsx(Select,{className:\"col-sm-2 col-offset-4\",styles:customStyles,defaultValue:{value:'National',label:'National'},options:options1,onChange:function onChange(e){return handleAddrTypeChange(e);}}),comp,comp1]})}),/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsx(Row,{style:{margin:'5px'},children:/*#__PURE__*/_jsxs(Table,{responsive:true,className:\"styled-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:response.resonse_data&&getKey.map(function(key,index){return/*#__PURE__*/_jsx(\"th\",{children:key},key);})})}),/*#__PURE__*/_jsx(\"tbody\",{children:response.resonse_data&&response.resonse_data.table_data.map(function(element,index){return/*#__PURE__*/_jsx(\"tr\",{children:getKey.map(function(keys,indexs){return/*#__PURE__*/_jsx(\"td\",{children:element[keys]});})});})}),/*#__PURE__*/_jsx(ReactPaginate,(_jsx2={previousLabel:'previous',nextLabel:'next',breakLabel:'...',breakClassName:'break-me',pageCount:pageResponse.page_count,marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:'pagination',activeClassName:'active'},_defineProperty(_jsx2,\"breakClassName\",'page-item'),_defineProperty(_jsx2,\"breakLinkClassName\",'page-link'),_defineProperty(_jsx2,\"containerClassName\",'pagination'),_defineProperty(_jsx2,\"pageClassName\",'page-item'),_defineProperty(_jsx2,\"pageLinkClassName\",'page-link'),_defineProperty(_jsx2,\"previousClassName\",'page-item'),_defineProperty(_jsx2,\"previousLinkClassName\",'page-link'),_defineProperty(_jsx2,\"nextClassName\",'page-item'),_defineProperty(_jsx2,\"nextLinkClassName\",'page-link'),_defineProperty(_jsx2,\"activeClassName\",'active'),_defineProperty(_jsx2,\"onPageChange\",function onPageChange(e){return handlePageClick(e);}),_jsx2))]})})})]});}export default Vertical;","map":{"version":3,"sources":["C:/Users/Baburaj/hyundaidashboard/src/components/vertical_dashboard.js"],"names":["React","useState","useEffect","Navbar","Brand","Container","Table","Nav","Dropdown","Button","CardGroup","Card","Form","Row","Col","logo_hyundai","Dropdowns","axios","Select","trackPromise","$","Dashboard","jQuery","moment","DateRangePicker","ReactPaginate","customStyles","option","provided","state","borderBottom","color","isSelected","backgroundColor","control","marginTop","options1","value","label","Vertical","page_count","pageResponse","pageCountResponse","current","currenPage","showForm","setShowForm","data","repos","resp","setGitData","selectValue","setSelectValue","start","subtract","end","setState","resonse_data","response","setResponse","comp","comp1","handleAddrTypeChange","e","region_east","localStorage","getItem","dealer","handleAddrTypeChange1","handleAddrTypeChange2","fetchData","get","respGlobal","params","username","permission","start_date","end_date","report_type","respRepos","setItem","fetchData1","hierarchy","dealer_code","region_name","format","current_page","records_per_page","dashApi","Math","ceil","meta","total_records","record_limit_per_page","err","console","log","handleEvent","ranges","handleCallback","getKey","Object","keys","table_data","handlePageClick","selected","marginRight","fontFamily","logo_hyundai1","margin","flex","textAlign","startDate","toDate","endDate","height","map","key","index","element","indexs"],"mappings":"svBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,SAAxB,CAAmCC,KAAnC,CAA0CC,GAA1C,CAA+CC,QAA/C,CAAyDC,MAAzD,CAAiEC,SAAjE,CAA4EC,IAA5E,CAAkFC,IAAlF,CAAwFC,GAAxF,CAA6FC,GAA7F,KAAwG,iBAAxG,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,C,mEAEA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,MAAO,0BAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,YAAT,KAA6B,uBAA7B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,eAAP,KAA4B,iCAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,C,6IAIA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,MAAM,CAAE,gBAACC,QAAD,CAAWC,KAAX,wCACHD,QADG,MAENE,YAAY,CAAE,kBAFR,CAGNC,KAAK,CAAEF,KAAK,CAACG,UAAN,CAAmB,QAAnB,CAA8B,OAH/B,CAINC,eAAe,CAAEJ,KAAK,CAACG,UAAN,CAAmB,OAAnB,CAA6B,OAJxC,IADS,CAOjBE,OAAO,CAAE,iBAACN,QAAD,wCACJA,QADI,MAEPO,SAAS,CAAE,IAFJ,IAPQ,CAArB,CAeE,GAAMC,CAAAA,QAAQ,CAAG,CACf,CAAEC,KAAK,CAAE,UAAT,CAAqBC,KAAK,CAAE,UAA5B,CADe,CAEf,CAAED,KAAK,CAAE,QAAT,CAAmBC,KAAK,CAAE,QAA1B,CAFe,CAGf,CAAED,KAAK,CAAE,QAAT,CAAmBC,KAAK,CAAE,QAA1B,CAHe,CAAjB,CAMF,QAASC,CAAAA,QAAT,EAAoB,WAElB,cAA0CtC,QAAQ,CAAC,CAACuC,UAAU,CAAG,IAAd,CAAD,CAAlD,wCAAOC,YAAP,eAAqBC,iBAArB,eAEA,eAA8BzC,QAAQ,CAAC,CAAD,CAAtC,yCAAO0C,OAAP,eAAgBC,UAAhB,eAEE,eAAgC3C,QAAQ,CAAC,UAAD,CAAxC,yCAAO4C,QAAP,eAAiBC,WAAjB,eACA,eAA2B7C,QAAQ,CAAC,CAAE8C,IAAI,CAAE,IAAR,CAAcC,KAAK,CAAE,IAArB,CAAD,CAAnC,yCAAOC,IAAP,eAAaC,UAAb,eACA,eAAsCjD,QAAQ,CAAC,EAAD,CAA9C,0CAAOkD,WAAP,gBAAoBC,cAApB,gBACA,gBAA0BnD,QAAQ,CAAC,CACjCoD,KAAK,CAAE9B,MAAM,GAAG+B,QAAT,CAAkB,GAAlB,CAAuB,MAAvB,CAD0B,CAEjCC,GAAG,CAAEhC,MAAM,GAAG+B,QAAT,CAAkB,EAAlB,CAAsB,MAAtB,CAF4B,CAAD,CAAlC,2CAAOzB,KAAP,gBAAc2B,QAAd,gBAIA,gBAAgCvD,QAAQ,CAAC,CAAEwD,YAAY,CAAE,IAAhB,CAAD,CAAxC,2CAAOC,QAAP,gBAAiBC,WAAjB,gBAEA,GAAIC,CAAAA,IAAJ,CAAWC,KAAX,CAEA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,CAAD,CAC/B,CAKE,GAAGA,CAAC,CAAC1B,KAAF,EAAW,QAAd,CACA,CACE,GAAI2B,CAAAA,WAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAlB,CACAd,cAAc,CAACY,WAAD,CAAd,CACD,CAJD,IAKK,IAAGD,CAAC,CAAC1B,KAAF,EAAW,QAAd,CACL,CACE,GAAI8B,CAAAA,MAAM,CAAIF,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAd,CACAd,cAAc,CAACe,MAAD,CAAd,CAED,CALI,IAMA,IAAGJ,CAAC,CAAC1B,KAAF,EAAW,UAAd,CACL,CACEe,cAAc,CAAC,GAAD,CAAd,CAED,CAGDN,WAAW,CAACiB,CAAC,CAAC1B,KAAH,CAAX,CAGD,CA3BC,CA6BF,GAAM+B,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACL,CAAD,CAC9B,CACEX,cAAc,CAAEW,CAAC,CAAC1B,KAAJ,CAAd,CAID,CAND,CAQA,GAAMgC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACN,CAAD,CAC9B,CACEX,cAAc,CAAEW,CAAC,CAAC1B,KAAJ,CAAd,CAID,CAND,CAUA,GAAMiC,CAAAA,SAAS,0FAAG,kLAGSrD,CAAAA,KAAK,CAACsD,GAAN,4LAHT,QAGVC,UAHU,qCAMQvD,CAAAA,KAAK,CAACsD,GAAN,CACtB,wFADsB,CACmE,CAAEE,MAAM,CAAE,CAAEC,QAAQ,CAAE,OAAZ,CAAsBC,UAAU,CAAG,SAAnC,CAA+CC,UAAU,CAAG,YAA5D,CAA2EC,QAAQ,CAAG,YAAtF,CAAqGC,WAAW,CAAE,MAAlH,CAAV,CADnE,CANR,QAMVC,SANU,eAahB7B,UAAU,CAAC,CAAEH,IAAI,CAAEyB,UAAU,CAACzB,IAAnB,CAAyBC,KAAK,CAAE+B,SAAS,CAAChC,IAA1C,CAAD,CAAV,CAIAkB,YAAY,CAACe,OAAb,CAAqB,aAArB,CAAmC/B,IAAI,CAACD,KAAL,CAAW,CAAX,EAAcX,KAAjD,EACA4B,YAAY,CAACe,OAAb,CAAqB,QAArB,CAA8B/B,IAAI,CAACF,IAAL,CAAU,CAAV,EAAaV,KAA3C,EAlBgB,sDAAH,kBAATiC,CAAAA,SAAS,0CAAf,CAsBA,GAAMW,CAAAA,UAAU,2FAAG,4LAGKhE,CAAAA,KAAK,CAACsD,GAAN,CACpB,uFADoB,CACoE,CAAEE,MAAM,CAAG,CAACC,QAAQ,CAAE,OAAX,CAAqBQ,SAAS,CAAGrC,QAAjC,CAA4CsC,WAAW,CAAGhC,WAA1D,CAAwEiC,WAAW,CAAIjC,WAAvF,CAAqGwB,UAAU,CAAG,SAAlH,CAA6HC,UAAU,CAAG/C,KAAK,CAACwB,KAAN,CAAYgC,MAAZ,CAAmB,YAAnB,CAA1I,CAA6KR,QAAQ,CAAGhD,KAAK,CAAC0B,GAAN,CAAU8B,MAAV,CAAiB,YAAjB,CAAxL,CAAwNP,WAAW,CAAG,MAAtO,CAA8OQ,YAAY,CAAE3C,OAA5P,CAAqQ4C,gBAAgB,CAAG,IAAxR,CAAX,CADpE,CAHL,QAGXC,OAHW,gBAOjB7B,WAAW,CAAC,CAAEF,YAAY,CAAE+B,OAAO,CAACzC,IAAxB,CAAD,CAAX,CACAL,iBAAiB,CAAC,CAAEF,UAAU,CAAEiD,IAAI,CAACC,IAAL,CAAUF,OAAO,CAACzC,IAAR,CAAa4C,IAAb,CAAkBC,aAAlB,CAAkCJ,OAAO,CAACzC,IAAR,CAAa4C,IAAb,CAAkBE,qBAA9D,CAAd,CAAD,CAAjB,CARiB,oHAWR,CAACC,GAAG,aAAJ,CAXQ,wEAAH,kBAAVb,CAAAA,UAAU,2CAAhB,CAgBAc,OAAO,CAACC,GAAR,CAAYvD,YAAY,CAACD,UAAzB,EAGAtC,SAAS,CAAC,UAAM,CAGdiB,YAAY,CACVmD,SAAS,EADC,CAAZ,CAKAnD,YAAY,CACV8D,UAAU,EADA,CAAZ,CAMD,CAdQ,CAcN,CAACpC,QAAD,CAAUhB,KAAV,CAAgBsB,WAAhB,CAA4BR,OAA5B,CAdM,CAAT,CAsBA,GAAIE,QAAQ,EAAI,QAAhB,CAA0B,CAGxBe,IAAI,cAAI,KAAC,MAAD,EAAQ,SAAS,CAAC,uBAAlB,CAA2C,MAAM,CAAKlC,YAAtD,CAAqE,OAAO,CAAIuB,IAAI,CAACD,KAArF,CAA6F,YAAY,CAAEC,IAAI,CAACD,KAAL,CAAW,CAAX,CAA3G,CACR,QAAQ,CAAE,kBAAAe,CAAC,QAAIK,CAAAA,qBAAqB,CAACL,CAAD,CAAzB,EADH,EAAR,CAID,CAPD,IAQK,IAAGlB,QAAQ,EAAI,QAAf,CACL,CAEEgB,KAAK,cAAG,KAAC,MAAD,EAAQ,SAAS,CAAC,uBAAlB,CACR,MAAM,CAAKnC,YADH,CAER,OAAO,CAAIuB,IAAI,CAACF,IAFR,CAGR,YAAY,CAAEE,IAAI,CAACF,IAAL,CAAU,CAAV,CAHN,CAIR,QAAQ,CAAE,kBAAAgB,CAAC,QAAIM,CAAAA,qBAAqB,CAACN,CAAD,CAAzB,EAJH,EAAR,CAMD,CAGD,GAAMkC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAClC,CAAD,CACtB,CACIgC,OAAO,CAACC,GAAR,CAAYjC,CAAC,CAACmC,MAAd,EACD,CAHD,CASAH,OAAO,CAACC,GAAR,CAAYnE,KAAK,CAACwB,KAAN,CAAYgC,MAAZ,CAAmB,YAAnB,EAAmC,GAAnC,CAAwCxD,KAAK,CAAC0B,GAAN,CAAU8B,MAAV,CAAiB,YAAjB,CAApD,EAEA,GAAQhC,CAAAA,KAAR,CAAuBxB,KAAvB,CAAQwB,KAAR,CAAeE,GAAf,CAAuB1B,KAAvB,CAAe0B,GAAf,CACA,GAAM4C,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAC9C,KAAD,CAAQE,GAAR,CAAgB,CACrCC,QAAQ,CAAC,CAAEH,KAAK,CAALA,KAAF,CAASE,GAAG,CAAHA,GAAT,CAAD,CAAR,CACD,CAFD,CAGA,GAAMjB,CAAAA,KAAK,CACXe,KAAK,CAACgC,MAAN,CAAa,cAAb,EAA+B,KAA/B,CAAuC9B,GAAG,CAAC8B,MAAJ,CAAW,cAAX,CADvC,CAKA,GAAG3B,QAAQ,CAACD,YAAZ,CACA,CACE,GAAK2C,CAAAA,MAAM,CAAGC,MAAM,CAACC,IAAP,CAAY5C,QAAQ,CAACD,YAAT,CAAsB8C,UAAtB,CAAiC,CAAjC,CAAZ,CAAd,CAGD,CAED,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACzC,CAAD,CACxB,CACEnB,UAAU,CAAEmB,CAAC,CAAC0C,QAAF,CAAa,CAAf,CAAV,CAID,CAND,CAUA,mBAEE,wCACA,MAAC,MAAD,EAAQ,EAAE,CAAC,QAAX,wBACA,KAAC,MAAD,CAAQ,KAAR,EAAc,IAAI,CAAC,OAAnB,uBAA2B,YAAK,GAAG,CAAE1F,YAAV,EAA3B,EADA,cAGA,KAAC,MAAD,CAAQ,MAAR,IAHA,cAIF,KAAC,MAAD,CAAQ,QAAR,EAAiB,SAAS,CAAC,qBAA3B,uBACE,MAAC,MAAD,CAAQ,IAAR,yBACC,UAAG,IAAI,CAAC,QAAR,CAAiB,KAAK,CAAE,CAAC2F,WAAW,CAAC,MAAb,CAAoB3E,KAAK,CAAC,SAA1B,CAAoC4E,UAAU,CAAE,0BAAhD,CAAxB,oBADD,cAEC,UAAG,IAAI,CAAC,GAAR,EAFD,cAGC,YAAK,GAAG,CAAEC,aAAV,EAHD,GADF,EAJE,GADA,cAcF,MAAC,GAAD,EACC,KAAK,CAAE,CAAC9E,YAAY,CAAE,mBAAf,CAAwC+E,MAAM,CAAE,MAAhD,CADR,CAEC,gBAAgB,CAAC,oBAFlB,wBAIA,KAAC,GAAD,CAAK,IAAL,wBACE,KAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,GAAf,CAAmB,KAAK,CAAE,CAACF,UAAU,CAAE,0BAAb,CAA1B,gCADF,EAJA,cAOA,KAAC,GAAD,CAAK,IAAL,wBACE,KAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,oBAAf,CAAqC,KAAK,CAAE,CAACA,UAAU,CAAE,0BAAb,CAA5C,kCADF,EAPA,cAWA,KAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,qBAApB,CAA0C,KAAK,CAAE,CAAKG,IAAI,CAAE,GAAX,CAAjD,uBACE,KAAC,GAAD,CAAK,IAAL,EAAU,QAAQ,CAAC,UAAnB,CAA8B,KAAK,CAAE,CAAKC,SAAS,CAAE,OAAhB,CAAwBhF,KAAK,CAAC,SAA9B,CAAwC4E,UAAU,CAAE,0BAApD,CAArC,4BADF,EAXA,GAdE,cAkCJ,KAAC,SAAD,EAAW,KAAK,KAAhB,uBACQ,MAAC,GAAD,EAAK,KAAK,CAAE,CAACE,MAAM,CAAC,KAAR,CAAZ,wBAKA,KAAC,eAAD,EAAoB,eAAe,CAAE,CACnCG,SAAS,CAAE3D,KAAK,CAAC4D,MAAN,EADwB,CAEnCC,OAAO,CAAE3D,GAAG,CAAC0D,MAAJ,EAF0B,CAArC,CAIA,UAAU,CAAEd,cAJZ,CAML,MAAM,CAAKzE,YANN,uBAQA,cAAO,EAAE,CAAG,cAAZ,CAA2B,SAAS,CAAC,uBAArC,CAA8D,KAAK,CAAE,CAAKyF,MAAM,CAAE,MAAb,CAAqBN,MAAM,CAAE,MAA7B,CAArE,EARA,EALA,cAgBH,KAAC,MAAD,EAAQ,SAAS,CAAC,uBAAlB,CACA,MAAM,CAAKnF,YADX,CAEA,YAAY,CAAE,CAAEW,KAAK,CAAE,UAAT,CAAqBC,KAAK,CAAE,UAA5B,CAFd,CAGH,OAAO,CAAIF,QAHR,CAIH,QAAQ,CAAE,kBAAA2B,CAAC,QAAID,CAAAA,oBAAoB,CAACC,CAAD,CAAxB,EAJR,EAhBG,CAgCPH,IAhCO,CAiCPC,KAjCO,GADR,EAlCI,cA4EJ,KAAC,SAAD,EAAW,KAAK,KAAhB,uBAGA,KAAC,GAAD,EAAK,KAAK,CAAE,CAACgD,MAAM,CAAC,KAAR,CAAZ,uBAEA,MAAC,KAAD,EAAO,UAAU,KAAjB,CAAkB,SAAS,CAAC,cAA5B,wBACgB,oCACR,oBACInD,QAAQ,CAACD,YAAT,EAAyB2C,MAAM,CAACgB,GAAP,CAAW,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAClD,mBAAO,oBAAeD,GAAf,EAASA,GAAT,CAAP,CACH,CAF0B,CAD7B,EADQ,EADhB,cAQgB,uBAGD3D,QAAQ,CAACD,YAAT,EAA2BC,QAAQ,CAACD,YAAT,CAAsB8C,UAAvB,CAAmCa,GAAnC,CAAuC,SAACG,OAAD,CAASD,KAAT,CAAmB,CAG9E,mBAAW,oBAEhClB,MAAM,CAACgB,GAAP,CAAW,SAACd,IAAD,CAAOkB,MAAP,CACX,CACE,mBAAO,oBAAKD,OAAO,CAACjB,IAAD,CAAZ,EAAP,CACD,CAHD,CAFgC,EAAX,CAaA,CAhBoB,CAHzB,EARhB,cA8BgB,KAAC,aAAD,SACN,aAAa,CAAE,UADT,CAEN,SAAS,CAAE,MAFL,CAGN,UAAU,CAAE,KAHN,CAIN,cAAc,CAAE,UAJV,CAKN,SAAS,CAAE7D,YAAY,CAACD,UALlB,CAMN,oBAAoB,CAAE,CANhB,CAON,kBAAkB,CAAE,CAPd,CAQN,kBAAkB,CAAE,YARd,CASN,eAAe,CAAE,QATX,yCAUU,WAVV,6CAWc,WAXd,6CAYc,YAZd,wCAaS,WAbT,4CAca,WAdb,4CAea,WAfb,gDAgBiB,WAhBjB,wCAiBS,WAjBT,4CAkBa,WAlBb,0CAmBW,QAnBX,uCAoBQ,sBAAAuB,CAAC,QAAIyC,CAAAA,eAAe,CAACzC,CAAD,CAAnB,EApBT,SA9BhB,GAFA,EAHA,EA5EI,GAFF,CAsJD,CAED,cAAexB,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Navbar, Brand, Container, Table, Nav, Dropdown, Button, CardGroup, Card, Form, Row, Col } from \"react-bootstrap\";\r\nimport logo_hyundai from '../img/MOBIS_LOGO.png';\r\nimport logo_hyundai1 from '../img/Icon ionic-md-arrow-dropdown.svg'\r\nimport Dropdowns from '../components/select_dropdown'\r\nimport \"./vertical_dashboard.css\";\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { trackPromise } from 'react-promise-tracker';\r\nimport $ from 'jquery';\r\nimport Dashboard from '../components/dashboard'\r\nimport jQuery from 'jquery';\r\nimport moment from 'moment';\r\nimport DateRangePicker from 'react-bootstrap-daterangepicker';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\n\r\n\r\nconst customStyles = {\r\n    option: (provided, state) => ({\r\n      ...provided,\r\n      borderBottom: '2px dotted green',\r\n      color: state.isSelected ? 'yellow' : 'black',\r\n      backgroundColor: state.isSelected ? 'green' : 'white'\r\n    }),\r\n    control: (provided) => ({\r\n      ...provided,\r\n      marginTop: \"5%\",\r\n    })\r\n  };\r\n\r\n\r\n\r\n  const options1 = [\r\n    { value: 'National', label: 'National' },\r\n    { value: 'Region', label: 'Region' },\r\n    { value: 'Dealer', label: 'Dealer' }\r\n  ]\r\n\r\nfunction Vertical() {\r\n\r\n  const [pageResponse, pageCountResponse] = useState({page_count : null});\r\n\r\n  const [current, currenPage] = useState(1);\r\n\r\n    const [showForm, setShowForm] = useState('National');\r\n    const [resp, setGitData] = useState({ data: null, repos: null });\r\n    const [selectValue, setSelectValue] = useState('');\r\n    const [state, setState] = useState({\r\n      start: moment().subtract(100, 'days'),\r\n      end: moment().subtract(70, 'days'),\r\n    });\r\n    const [response, setResponse] = useState({ resonse_data: null});\r\n\r\n    let comp , comp1;\r\n\r\n    const handleAddrTypeChange = (e) => \r\n  { \r\n\r\n\r\n  \r\n\r\n    if(e.value == \"Region\")\r\n    {\r\n      var region_east = localStorage.getItem(\"region_east\")\r\n      setSelectValue(region_east);\r\n    }\r\n    else if(e.value == \"Dealer\")\r\n    {\r\n      var dealer  = localStorage.getItem(\"dealer\");\r\n      setSelectValue(dealer);\r\n  \r\n    }\r\n    else if(e.value == \"National\")\r\n    {\r\n      setSelectValue(' ');\r\n\r\n    }\r\n\r\n\r\n    setShowForm(e.value)\r\n\r\n\r\n  }\r\n\r\n  const handleAddrTypeChange1 = (e) => \r\n  { \r\n    setSelectValue((e.value)); \r\n\r\n  \r\n\r\n  }\r\n\r\n  const handleAddrTypeChange2 = (e) => \r\n  { \r\n    setSelectValue((e.value)); \r\n\r\n   \r\n\r\n  }\r\n\r\n\r\n\r\n  const fetchData = async () => {\r\n\r\n\r\n    const respGlobal = await axios.get(\r\n      `https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_dealer_list/?username=login1&permission=[%22KIA%22]&start_date=01/01/2021&end_date=30/01/2021&report_type=DCSI`\r\n    );\r\n    const respRepos = await axios.get(\r\n      'https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_region_list/',{ params: { username: 'login' , permission : '[\"KIA\"]' , start_date : '01/01/2021' , end_date : '30/01/2021' , report_type :'DCSI'  } },\r\n      \r\n      );\r\n\r\n  \r\n\r\n    setGitData({ data: respGlobal.data, repos: respRepos.data })\r\n\r\n    \r\n\r\n    localStorage.setItem(\"region_east\",resp.repos[0].value);\r\n    localStorage.setItem(\"dealer\",resp.data[0].value);\r\n\r\n  };\r\n\r\n  const fetchData1 = async () => {\r\n\r\n    try {\r\n    const dashApi = await axios.get(\r\n      'https://kmi-salessatisfaction.apprikart.com/secured_api/dashboard_api/get_table_data/',{ params : {username: 'login' , hierarchy : showForm , dealer_code : selectValue , region_name  : selectValue , permission : '[\"KIA\"]', start_date : state.start.format('DD/MM/YYYY') , end_date : state.end.format('DD/MM/YYYY'), report_type : 'DCSI', current_page :current, records_per_page : '50' } },\r\n    );\r\n\r\n    setResponse({ resonse_data: dashApi.data})\r\n    pageCountResponse({ page_count: Math.ceil(dashApi.data.meta.total_records / dashApi.data.meta.record_limit_per_page)})\r\n    }\r\n    catch (err) {\r\n      return {err};\r\n\r\n    }\r\n\r\n  };\r\n  console.log(pageResponse.page_count)\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    \r\n    trackPromise(\r\n      fetchData()\r\n    );\r\n\r\n\r\n    trackPromise(\r\n      fetchData1()\r\n    );\r\n   \r\n \r\n\r\n  }, [showForm,state,selectValue,current]);\r\n\r\n\r\n \r\n \r\n\r\n\r\n\r\n  if (showForm == 'Region') {\r\n  \r\n\r\n    comp =  <Select className=\"col-md-2 col-offset-4\"  styles = { customStyles } options = {resp.repos}  defaultValue={resp.repos[0]}\r\n    onChange={e => handleAddrTypeChange1(e)}     \r\n    />\r\n\r\n  }\r\n  else if(showForm == 'Dealer')\r\n  {\r\n    \r\n    comp1 = <Select className=\"col-md-2 col-offset-4\"\r\n    styles = { customStyles } \r\n    options = {resp.data} \r\n    defaultValue={resp.data[0]}\r\n    onChange={e => handleAddrTypeChange2(e)}  \r\n/>\r\n  }\r\n\r\n\r\n  const handleEvent = (e) => \r\n{\r\n    console.log(e.ranges);\r\n  }\r\n\r\n \r\n\r\n\r\n\r\n  console.log(state.start.format('DD/MM/YYYY') + \"-\"+ state.end.format('DD/MM/YYYY'))\r\n\r\n  const { start, end } = state;\r\n  const handleCallback = (start, end) => {\r\n    setState({ start, end });\r\n  };\r\n  const label =\r\n  start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY');\r\n\r\n\r\n\r\n  if(response.resonse_data)\r\n  {\r\n    var  getKey = Object.keys(response.resonse_data.table_data[0])\r\n\r\n\r\n  }\r\n\r\n  const handlePageClick = (e) => \r\n  { \r\n    currenPage((e.selected + 1)); \r\n   \r\n   \r\n\r\n  }\r\n\r\n\r\n\r\n  return (\r\n   \r\n    <>\r\n    <Navbar bg=\"light1\">\r\n    <Navbar.Brand href=\"#home\"><img src={logo_hyundai} />\r\n    </Navbar.Brand>\r\n    <Navbar.Toggle />\r\n  <Navbar.Collapse className=\"justify-content-end\">\r\n    <Navbar.Text>\r\n     <a href=\"#login\" style={{marginRight:'20px',color:'#707070',fontFamily: \"Hyundai Sans Head Office\"}}>Logout</a>\r\n     <a href=\"#\"></a>\r\n     <img src={logo_hyundai1} />\r\n    </Navbar.Text>\r\n  </Navbar.Collapse>\r\n  </Navbar>\r\n\r\n  <Nav\r\n   style={{borderBottom :'1px solid #B2B2B2',     margin: '10px'}}\r\n   defaultActiveKey=\"vertical_dashboard\"\r\n>\r\n  <Nav.Item>\r\n    <Nav.Link href=\"/\" style={{fontFamily: \"Hyundai Sans Head Office\"}}>Vertical Dashboard</Nav.Link>\r\n  </Nav.Item>\r\n  <Nav.Item>\r\n    <Nav.Link href=\"vertical_dashboard\"  style={{fontFamily: \"Hyundai Sans Head Office\"}}>Horizontal Dashboard</Nav.Link>\r\n  </Nav.Item>\r\n \r\n  <Nav.Item className=\"justify-content-end\" style={{    flex: '1'}}>\r\n    <Nav.Link eventKey=\"disabled\" style={{    textAlign: 'right',color:'#0A0A0A',fontFamily: \"Hyundai Sans Head Office\"}}>\r\n      Dowload Report\r\n    </Nav.Link>\r\n  </Nav.Item>\r\n\r\n</Nav>\r\n\r\n\r\n<Container fluid >\r\n        <Row style={{margin:'1px'}}>\r\n\r\n    \r\n\r\n   \r\n        <DateRangePicker    initialSettings={{\r\n          startDate: start.toDate(),\r\n          endDate: end.toDate()\r\n        }}\r\n        onCallback={handleCallback}\r\n\r\n   styles = { customStyles }\r\n >\r\n        <input id = \"someRandomID\" className=\"col-sm-2 col-offset-4\"  style={{    height: '40px', margin: '10px'}}/>\r\n      </DateRangePicker>\r\n    \r\n     <Select className=\"col-sm-2 col-offset-4\" \r\n     styles = { customStyles }\r\n     defaultValue={{ value: 'National', label: 'National' }}\r\n  options = {options1} \r\n  onChange={e => handleAddrTypeChange(e)}\r\n\r\n\r\n  \r\n  />\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n{comp}\r\n{comp1}\r\n\r\n\r\n\r\n</Row>\r\n</Container >\r\n\r\n\r\n<Container fluid>\r\n\r\n\r\n<Row style={{margin:'5px'}}>\r\n\r\n<Table responsive className=\"styled-table\">\r\n                <thead>\r\n        <tr >\r\n          { response.resonse_data && getKey.map((key, index) => {\r\n              return <th key={key}>{key}</th>\r\n          })}\r\n        </tr>\r\n                </thead>\r\n                <tbody>\r\n                    \r\n               {  \r\n               response.resonse_data &&  (response.resonse_data.table_data).map((element,index) => {\r\n               \r\n                 \r\n                     return  (  <tr>\r\n{\r\ngetKey.map((keys, indexs) => \r\n{\r\n  return <td>{element[keys]}</td>\r\n})\r\n\r\n}\r\n                             </tr>  \r\n                     )\r\n                 \r\n\r\n                 \r\n                    })\r\n                }\r\n                </tbody>\r\n                <ReactPaginate \r\n          previousLabel={'previous'}\r\n          nextLabel={'next'}\r\n          breakLabel={'...'}\r\n          breakClassName={'break-me'}\r\n          pageCount={pageResponse.page_count}\r\n          marginPagesDisplayed={2}\r\n          pageRangeDisplayed={5}\r\n          containerClassName={'pagination'}\r\n          activeClassName={'active'}\r\n          breakClassName={'page-item'}\r\n          breakLinkClassName={'page-link'}\r\n          containerClassName={'pagination'}\r\n          pageClassName={'page-item'}\r\n          pageLinkClassName={'page-link'}\r\n          previousClassName={'page-item'}\r\n          previousLinkClassName={'page-link'}\r\n          nextClassName={'page-item'}\r\n          nextLinkClassName={'page-link'}\r\n          activeClassName={'active'}\r\n          onPageChange={e => handlePageClick(e)}\r\n\r\n        />\r\n            </Table>\r\n\r\n</Row>\r\n\r\n\r\n</Container>\r\n\r\n\r\n\r\n \r\n</>\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default Vertical;\r\n"]},"metadata":{},"sourceType":"module"}